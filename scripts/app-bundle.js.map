{"version":3,"sources":["app.ts","environment.ts","main.ts","resources/index.ts","modules/spirit/builds.ts","modules/spirit/vms.ts"],"names":[],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {Router, RouterConfiguration} from 'aurelia-router';\nimport * as AdminLTE from 'admin-lte';\n\nexport class App {\n  public router: Router;\n\n  public configureRouter(config: RouterConfiguration, router: Router) {\n    config.title = 'Aurelia';\n    config.map([\n      { route: ['', 'spiritvms'], name: 'spiritvms',      moduleId: 'modules/spirit/vms',      nav: true, title: 'SPIRIT VMs' },\n      { route: 'spiritbuilds', name: 'spiritbuilds',      moduleId: 'modules/spirit/builds',      nav: true, title: 'SPIRIT Builds' }\n    ]);\n\n    this.router = router;\n  }\n\n    attached(){\n      $.AdminLTE.layout.fix();\n    }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import {Aurelia} from 'aurelia-framework'\nimport environment from './environment';\n\n//Configure Bluebird Promises.\n(<any>Promise).config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia: Aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources')\n    .plugin('aurelia-syncfusion-bridge', (syncfusion) => syncfusion.ejGrid().ejTemplate());\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {FrameworkConfiguration} from 'aurelia-framework';\n\nexport function configure(config: FrameworkConfiguration) {\n  //config.globalResources([]);\n}\n","\nimport { inject } from 'aurelia-framework';\n//import * as AutoMapper from 'automapper-ts';\nimport * as PouchDB from 'pouchdb';\nimport * as PouchDBFind from 'pouchdb-find';\nPouchDB.plugin(PouchDBFind);\n\nexport class rmsbuilds {\n    public builds: Build[];\n    edit = { allowEditing: true, allowAdding: true, allowDeleting: true, editMode : \"normal\", showAddNewRow : true };\n    toolbar = { showToolbar: true, toolbarItems: [ \"add\", \"edit\", \"delete\", \"update\", \"cancel\" ] }; // , toolbarItems: [ej.Grid.ToolBarItems.Add, ej.Grid.ToolBarItems.Edit, ej.Grid.ToolBarItems.Delete, ej.Grid.ToolBarItems.Update, ej.Grid.ToolBarItems.Cancel] \n    //remoteCouch = 'https://earivensparthedeoulinera:55ca5146d328c0ed4b98f418c0ad3e77771ecebd@archaeology.cloudant.com/resman';\n    remoteCouch = 'http://resman_web:resman_web@kydevbuild01.cdps.cdp:5984/resman';\n    doc_type: string = 'spirit_build';\n\n    db = new PouchDB('resman');\n\n    constructor() {\n        this.loadBuilds();\n\n        // make sure the doc_type index exists\n        // this.db.createIndex({\n        //   index: {fields: ['doc_type']}\n        // }).then((result) => {\n        //   this.log(result);\n        // }).catch(function (err) {\n        //   this.log(err);\n        // });\n\n        this.db.sync(this.remoteCouch, {\n          live: true\n        }).on('change', (change) => {\n          // consider grabbing the 'docs' array from the change object \n          // and manually replacing them in the builds array\n          this.loadBuilds();\n        }).on('error', (err) => {\n          console.log(err);\n        });\n    }\n\n    loadBuilds = () => {   \n      // grab all 'spirit_machine docs\n      this.db.find({\n        selector: { doc_type: this.doc_type }\n      }).then((results) => {\n        this.builds = results.docs;\n      }).catch((err) => {\n        this.log(err, true);\n      })\n    }\n\n    afterEdit(e) {\n      this.db.get(e.data._id).then((build) => {\n\n        // set the current values on the existing build\n        // find a js automapper!\n        build.doc_type = this.doc_type;\n        build.build_id = e.data.build_id;\n        build.version = e.data.version;\n        build.location = e.data.location\n        build.stories = e.data.stories;\n        build.notify = e.data.notify;\n        build.spirit = e.data.spirit;\n        build.build_date = e.data.build_date;\n        build.time_entry_task = e.data.time_entry_task;\n\n        // save the updated build\n        this.db.put(build).catch((err) => {\n          this.log(err, true);\n        })\n      });\n    } \n\n    afterAdd(e) {\n      var build: Build = new Build();\n\n      build.doc_type = this.doc_type;\n      build.build_id = e.data.build_id;\n      build.version = e.data.version;\n      build.location = e.data.location\n      build.stories = e.data.stories;\n      build.notify = e.data.notify;\n      build.spirit = e.data.spirit;\n      build.build_date = e.data.build_date;\n      build.time_entry_task = e.data.time_entry_task;\n\n      this.db.post(build).catch((err) => {\n        this.log(err, true);\n      });\n    }\n\n    afterDelete(e) {\n      this.db.get(e.data._id).then((build) => {\n        this.db.remove(build._id, build._rev).catch((err) => {\n          this.log(err, true);\n        });\n      });\n    }\n\n    log(err: any, showAlert: boolean = false) {\n      console.log(err);\n      if(showAlert) {\n        alert(err);\n      }\n    }\n\n    recordClick(e) {\n      //handle event here\n    }\n}\n\nexport class Build {\n    doc_type: string;\n    build_id: number;\n    version: string;\n    location: string;\n    stories: string;\n    notify: boolean;\n    spirit: boolean;\n    build_date: string;\n    time_entry_task: string;\n}\n\n\n\n","\nimport { inject } from 'aurelia-framework';\n//import * as AutoMapper from 'automapper-ts';\nimport * as PouchDB from 'pouchdb';\nimport * as PouchDBFind from 'pouchdb-find';\nPouchDB.plugin(PouchDBFind);\n\nexport class rmsvms {\n    public resources: Resource[];\n    edit = { allowEditing: true, allowAdding: true, allowDeleting: true, editMode : \"normal\", showAddNewRow : true };\n    toolbar = { showToolbar: true, toolbarItems: [ \"add\", \"edit\", \"delete\", \"update\", \"cancel\" ] }; // , toolbarItems: [ej.Grid.ToolBarItems.Add, ej.Grid.ToolBarItems.Edit, ej.Grid.ToolBarItems.Delete, ej.Grid.ToolBarItems.Update, ej.Grid.ToolBarItems.Cancel] \n    //remoteCouch = 'https://earivensparthedeoulinera:55ca5146d328c0ed4b98f418c0ad3e77771ecebd@archaeology.cloudant.com/resman';\n    remoteCouch = 'http://resman_web:resman_web@kydevbuild01.cdps.cdp:5984/resman';\n    doc_type: string = 'spirit_machine';\n\n    db = new PouchDB('resman');\n\n    constructor() {\n        this.loadResources();\n\n        // make sure the doc_type index exists\n        // this.db.createIndex({\n        //   index: {fields: ['doc_type']}\n        // }).then((result) => {\n        //   this.log(result);\n        // }).catch(function (err) {\n        //   this.log(err);\n        // });\n\n        this.db.sync(this.remoteCouch, {\n          live: true\n        }).on('change', (change) => {\n          // consider grabbing the 'docs' array from the change object \n          // and manually replacing them in the resources array\n          this.loadResources();\n        }).on('error', (err) => {\n          console.log(err);\n        });\n    }\n\n    loadResources = () => {   \n      // grab all 'spirit_machine docs\n      this.db.find({\n        selector: { doc_type: this.doc_type }\n      }).then((results) => {\n        this.resources = results.docs;\n      }).catch((err) => {\n        this.log(err, true);\n      })\n    }\n\n    afterEdit(e) {\n      this.db.get(e.data._id).then((resource) => {\n\n        // set the current values on the existing resource\n        // find a js automapper!\n        resource.doc_type = e.data.doc_type;\n        resource.resource_name = e.data.resource_name;\n        resource.default_url = e.data.default_url;\n        resource.purpose = e.data.purpose;\n        resource.resource_type_id = e.data.resource_type_id;\n        resource.record_status_id = e.data.record_status_id;\n\n        // save the updated resource\n        this.db.put(resource).catch((err) => {\n          this.log(err, true);\n        })\n      });\n    } \n\n    afterAdd(e) {\n      var resource: Resource = new Resource();\n        resource.doc_type = this.doc_type,\n        resource.id = e.data.id,\n        resource.resource_name = e.data.resource_name,\n        resource.default_url = e.data.default_url,\n        resource.purpose = e.data.purpose,\n        resource.resource_type_id = e.data.resource_type_id,\n        resource.record_status_id = e.data.record_status_id\n\n      this.db.post(resource).catch((err) => {\n        this.log(err, true);\n      });\n    }\n\n    afterDelete(e) {\n      this.db.get(e.data._id).then((resource) => {\n        this.db.remove(resource._id, resource._rev).catch((err) => {\n          this.log(err, true);\n        });\n      });\n    }\n\n    log(err: any, showAlert: boolean = false) {\n      console.log(err);\n      if(showAlert) {\n        alert(err);\n      }\n    }\n\n    recordClick(e) {\n      //handle event here\n    }\n}\n\nexport class Resource {\n    id: number;\n    doc_type: string;\n    resource_id: number;\n    project_id: number;\n    resource_type_id: string;\n    resource_name: string;\n    default_url: string;\n    purpose: string;\n    record_status_id: number;\n}\n\n\n"],"sourceRoot":"../src"}